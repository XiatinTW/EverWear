# EW_Member å°ˆæ¡ˆçµæ§‹èªªæ˜

é€™æ˜¯ä¸€å€‹ React + Express + MySQL çš„å…¨ç«¯æœƒå“¡ç®¡ç†ç³»çµ±ï¼Œä½¿ç”¨åˆ†å±¤å¼ MVC æ¶æ§‹ã€‚

## ğŸ“ å°ˆæ¡ˆæ ¹ç›®éŒ„çµæ§‹

```
EW_Member/
â”œâ”€â”€ ğŸš€ server.js                    # ä¸»ç¨‹å¼å…¥å£é»
â”œâ”€â”€ ğŸ“¦ package.json                 # å°ˆæ¡ˆä¾è³´èˆ‡è¨­å®š
â”œâ”€â”€ ğŸ”’ .env                         # ç’°å¢ƒè®Šæ•¸è¨­å®š
â”œâ”€â”€ ğŸ“– README.md                    # å°ˆæ¡ˆåŸºæœ¬èªªæ˜
â”œâ”€â”€ ğŸ”§ å¾Œç«¯ç›¸é—œè³‡æ–™å¤¾/
    - Controllers (æ§åˆ¶å™¨å±¤)
    - Models (è³‡æ–™æ¨¡å‹å±¤)
    - Routes (è·¯ç”±å±¤)
    - Services (æœå‹™å±¤)
    - Middleware (ä¸­é–“ä»¶å±¤)
    - Config (è¨­å®šå±¤)
    - Utils (å·¥å…·å‡½æ•¸)

â”œâ”€â”€ ğŸ¨ å‰ç«¯ç›¸é—œè³‡æ–™å¤¾ src/
    - Pages (é é¢çµ„ä»¶)
    - Components (å¯é‡ç”¨çµ„ä»¶)
    - Services (APIæœå‹™)
    - Styles (æ¨£å¼æª”æ¡ˆ)
    - Assets (éœæ…‹è³‡æº)
main.jsx: React å‰ç«¯çš„å…¥å£é»ï¼ˆé¡ä¼¼å¾Œç«¯çš„ server.jsï¼‰
App.jsx: å‰ç«¯è·¯ç”±ç®¡ç†ï¼ˆæ±ºå®š URL å°æ‡‰å“ªå€‹é é¢ï¼‰
```

---

## ğŸ”§ å¾Œç«¯æ¶æ§‹ (Backend)

### `/backend/` - å¾Œç«¯æ ¸å¿ƒç›®éŒ„
æ¡ç”¨ **MVC (Model-View-Controller)** åˆ†å±¤æ¶æ§‹

#### `/backend/controllers/` - æ§åˆ¶å™¨å±¤
**è·è²¬**: è™•ç† HTTP è«‹æ±‚ï¼ŒåŸ·è¡Œæ¥­å‹™é‚è¼¯

```
controllers/
â”œâ”€â”€ authController.js       # æœƒå“¡èªè­‰é‚è¼¯ (è¨»å†Š/ç™»å…¥/é©—è­‰)
â”œâ”€â”€ userController.js       # ç”¨æˆ¶è³‡æ–™ç®¡ç† (å€‹äººè³‡æ–™CRUD)
â”œâ”€â”€ contactController.js    # è¯çµ¡è¨Šæ¯è™•ç†
â””â”€â”€ orderController.js      # è¨‚å–®ç›¸é—œé‚è¼¯
```

**å·¥ä½œæµç¨‹**: æ¥æ”¶è«‹æ±‚ â†’ å‘¼å« Model â†’ è™•ç†è³‡æ–™ â†’ å›å‚³çµæœ

#### `/backend/models/` - è³‡æ–™æ¨¡å‹å±¤
**è·è²¬**: è³‡æ–™åº«æ“ä½œï¼ŒSQL æŸ¥è©¢åŸ·è¡Œ

```
models/
â”œâ”€â”€ User.js                 # ç”¨æˆ¶è³‡æ–™è¡¨æ“ä½œ (CRUD, å¯†ç¢¼é©—è­‰ç­‰)
â”œâ”€â”€ Contact.js              # è¯çµ¡è¨Šæ¯è³‡æ–™æ“ä½œ
â””â”€â”€ Order.js                # è¨‚å–®è³‡æ–™æ“ä½œ
```

**æ ¸å¿ƒé‚è¼¯**: 
- è³‡æ–™åº« CRUD æ“ä½œ
- SQL æŸ¥è©¢å°è£
- è³‡æ–™é©—è­‰èˆ‡è™•ç†

#### `/backend/routes/` - è·¯ç”±å±¤
**è·è²¬**: API ç«¯é»å®šç¾©ï¼Œè«‹æ±‚åˆ†ç™¼

```
routes/
â”œâ”€â”€ auth.js                 # èªè­‰ç›¸é—œ API (/api/v2/auth/*)
â”œâ”€â”€ users.js                # ç”¨æˆ¶è³‡æ–™ API (/api/v2/users/*)
â”œâ”€â”€ contacts.js             # è¯çµ¡åŠŸèƒ½ API (/api/v2/contacts/*)
â””â”€â”€ orders.js               # è¨‚å–®ç›¸é—œ API (/api/v2/orders/*)
```

**è·¯ç”±çµæ§‹**: HTTP æ–¹æ³• + URL è·¯å¾‘ â†’ Controller æ–¹æ³•

#### `/backend/services/` - æœå‹™å±¤
**è·è²¬**: å¤–éƒ¨æœå‹™æ•´åˆï¼Œç¬¬ä¸‰æ–¹ API

```
services/
â””â”€â”€ emailService.js         # éƒµä»¶ç™¼é€æœå‹™ (Nodemailer + Gmail SMTP)
```

**åŠŸèƒ½**: 
- é©—è­‰éƒµä»¶ç™¼é€
- å„ªæƒ åˆ¸éƒµä»¶ç™¼é€
- å¯†ç¢¼é‡è¨­éƒµä»¶

#### `/backend/middleware/` - ä¸­é–“ä»¶å±¤
**è·è²¬**: è«‹æ±‚é è™•ç†ï¼Œæ¬Šé™æ§åˆ¶

```
middleware/
â”œâ”€â”€ auth.js                 # JWT æ¬Šé™é©—è­‰
â”œâ”€â”€ validation.js           # è³‡æ–™æ ¼å¼é©—è­‰
â”œâ”€â”€ errorHandler.js         # çµ±ä¸€éŒ¯èª¤è™•ç†
â””â”€â”€ notFound.js             # 404 è™•ç†
```

#### `/backend/config/` - è¨­å®šå±¤
**è·è²¬**: ç³»çµ±è¨­å®šèˆ‡é€£ç·šç®¡ç†

```
config/
â””â”€â”€ database.js             # MySQL è³‡æ–™åº«é€£ç·šè¨­å®š
```

**åŠŸèƒ½**:
- è³‡æ–™åº«é€£ç·šæ± ç®¡ç†
- æŸ¥è©¢åŸ·è¡Œå‡½æ•¸
- äº‹å‹™è™•ç†

#### `/backend/utils/` - å·¥å…·å‡½æ•¸
**è·è²¬**: å…±ç”¨å·¥å…·èˆ‡è¼”åŠ©å‡½æ•¸

```
utils/
â””â”€â”€ helpers.js              # é€šç”¨å·¥å…·å‡½æ•¸
```

**å…§å®¹**: å¯†ç¢¼åŠ å¯†ã€JWT ç”Ÿæˆã€å›æ‡‰æ ¼å¼åŒ–ç­‰

---

## ğŸ¨ å‰ç«¯æ¶æ§‹ (Frontend)

### `/src/` - React å‰ç«¯ç¨‹å¼ç¢¼

#### `/src/pages/` - é é¢çµ„ä»¶
**è·è²¬**: è·¯ç”±å°æ‡‰çš„ä¸»è¦é é¢

```
pages/
â”œâ”€â”€ Auth.jsx                # ç™»å…¥/è¨»å†Šé é¢
â”œâ”€â”€ EmailVerification.jsx  # éƒµä»¶é©—è­‰é é¢
â””â”€â”€ account/                # æœƒå“¡ä¸­å¿ƒç›¸é—œé é¢
    â”œâ”€â”€ Profile.jsx         # å€‹äººè³‡æ–™é é¢
    â”œâ”€â”€ Password.jsx        # å¯†ç¢¼ç®¡ç†é é¢
    â””â”€â”€ Dashboard.jsx       # æœƒå“¡å„€è¡¨æ¿
```

#### `/src/components/` - å¯é‡ç”¨çµ„ä»¶
**è·è²¬**: å…±ç”¨ UI çµ„ä»¶

```
components/
â””â”€â”€ common/                 # é€šç”¨çµ„ä»¶
    â”œâ”€â”€ Header.jsx          # é é¢æ¨™é¡Œçµ„ä»¶
    â””â”€â”€ Navigation.jsx      # å°èˆªçµ„ä»¶
```

#### `/src/services/` - API ä¸²æ¥æœå‹™
**è·è²¬**: å‰ç«¯èˆ‡å¾Œç«¯ API é€šè¨Š

```
services/
â”œâ”€â”€ api.js                  # ä¸»è¦ API å‘¼å«å‡½æ•¸
â””â”€â”€ googleAuth.js           # Google OAuth æœå‹™
```

#### `/src/styles/` - æ¨£å¼æª”æ¡ˆ
**è·è²¬**: CSS æ¨£å¼ç®¡ç†

```
styles/
â”œâ”€â”€ Auth.css                # ç™»å…¥/è¨»å†Šé é¢æ¨£å¼
â”œâ”€â”€ EmailVerification.css  # éƒµä»¶é©—è­‰é é¢æ¨£å¼
â””â”€â”€ account/                # æœƒå“¡ä¸­å¿ƒæ¨£å¼
```

#### `/src/assets/` - éœæ…‹è³‡æº
**è·è²¬**: åœ–ç‰‡ã€åœ–ç¤ºç­‰éœæ…‹æª”æ¡ˆ

---

## ğŸ“‹ æ–‡ä»¶èˆ‡è¨­å®š

### æ ¸å¿ƒè¨­å®šæª”æ¡ˆ
```
â”œâ”€â”€ package.json            # å°ˆæ¡ˆä¾è³´ã€è…³æœ¬è¨­å®š
â”œâ”€â”€ .env                    # ç’°å¢ƒè®Šæ•¸ (è³‡æ–™åº«ã€APIé‡‘é‘°ç­‰)
â”œâ”€â”€ vite.config.js          # Vite å»ºç½®è¨­å®š
â”œâ”€â”€ tailwind.config.js      # Tailwind CSS è¨­å®š
â”œâ”€â”€ postcss.config.js       # PostCSS è™•ç†è¨­å®š
â””â”€â”€ eslint.config.js        # ESLint ç¨‹å¼ç¢¼è¦ç¯„
```

### æ–‡ä»¶æª”æ¡ˆ
```
â”œâ”€â”€ README.md               # å°ˆæ¡ˆåŸºæœ¬ä»‹ç´¹
â”œâ”€â”€ API_DOCUMENTATION.md    # API ä½¿ç”¨æ–‡ä»¶
â”œâ”€â”€ CLAUDE.md               # Claude Code æŒ‡å¼•
â””â”€â”€ PROJECT_DOCUMENTATION.md # è©³ç´°å°ˆæ¡ˆæ–‡ä»¶
```

---

## ğŸ§ª æ¸¬è©¦ç›¸é—œ

### `/test/` - æ¸¬è©¦è…³æœ¬ç›®éŒ„
```
test/
â”œâ”€â”€ test_api.sh             # API åŠŸèƒ½æ¸¬è©¦
â”œâ”€â”€ test_email_verification.sh # éƒµä»¶é©—è­‰æ¸¬è©¦
â””â”€â”€ test_google_register.sh # Google ç™»å…¥æ¸¬è©¦
```

### ç¨ç«‹æ¸¬è©¦æª”æ¡ˆ
```
â”œâ”€â”€ test_verification_flow.sh    # é©—è­‰æµç¨‹æ¸¬è©¦
â”œâ”€â”€ test_strict_registration.sh  # åš´æ ¼è¨»å†Šæ¸¬è©¦
â””â”€â”€ test_birth_day_validation.js # ç”Ÿæ—¥é©—è­‰æ¸¬è©¦
```

---

## ğŸ”„ è³‡æ–™æµå‘

### å…¸å‹çš„è«‹æ±‚æµç¨‹:
```
å‰ç«¯é é¢ (src/pages/) 
    â†“ å‘¼å« API
å‰ç«¯æœå‹™ (src/services/api.js)
    â†“ HTTP è«‹æ±‚
å¾Œç«¯è·¯ç”± (backend/routes/)
    â†“ åˆ†ç™¼è«‹æ±‚
å¾Œç«¯æ§åˆ¶å™¨ (backend/controllers/)
    â†“ è³‡æ–™æ“ä½œ
å¾Œç«¯æ¨¡å‹ (backend/models/)
    â†“ SQL æŸ¥è©¢
MySQL è³‡æ–™åº«
```

### èªè­‰æµç¨‹ç¯„ä¾‹:
```
ç”¨æˆ¶å¡«å¯«è¨»å†Šè¡¨å–® (Auth.jsx)
    â†“
API å‘¼å« (api.js)
    â†“
è·¯ç”±æ¥æ”¶ (routes/auth.js)
    â†“
æ§åˆ¶å™¨è™•ç† (authController.js)
    â†“
éƒµä»¶æœå‹™ (emailService.js) + ç”¨æˆ¶æ¨¡å‹ (User.js)
    â†“
ç™¼é€é©—è­‰éƒµä»¶ + å¯«å…¥è³‡æ–™åº«
```

---

## ğŸ”§ é–‹ç™¼èˆ‡éƒ¨ç½²

### é–‹ç™¼æŒ‡ä»¤
```bash
npm start           # åŒæ™‚å•Ÿå‹•å‰å¾Œç«¯
npm run dev         # åƒ…å•Ÿå‹•å‰ç«¯ (Vite)
npm run server      # åƒ…å•Ÿå‹•å¾Œç«¯ (Express)
npm run build       # å»ºç½®å‰ç«¯
npm run lint        # ç¨‹å¼ç¢¼æª¢æŸ¥
```

### ç’°å¢ƒéœ€æ±‚
- **å‰ç«¯**: React 18 + Vite
- **å¾Œç«¯**: Node.js + Express
- **è³‡æ–™åº«**: MySQL
- **éƒµä»¶æœå‹™**: Gmail SMTP

---

## ğŸ“š æŠ€è¡“æ¶æ§‹ç¸½çµ

| å±¤ç´š | æŠ€è¡“ | è·è²¬ |
|------|------|------|
| **å‰ç«¯** | React + Vite | ç”¨æˆ¶ä»‹é¢èˆ‡äº’å‹• |
| **è·¯ç”±** | Express Router | API ç«¯é»ç®¡ç† |
| **æ§åˆ¶** | Express Controller | æ¥­å‹™é‚è¼¯è™•ç† |
| **æ¨¡å‹** | MySQL + é€£ç·šæ±  | è³‡æ–™æŒä¹…åŒ– |
| **æœå‹™** | Nodemailer | å¤–éƒ¨æœå‹™æ•´åˆ |
| **ä¸­é–“ä»¶** | JWT + Validation | å®‰å…¨èˆ‡é©—è­‰ |

æ­¤æ¶æ§‹æ¡ç”¨ **é—œæ³¨é»åˆ†é›¢ (Separation of Concerns)** åŸå‰‡ï¼Œæ¯å€‹è³‡æ–™å¤¾å’Œæª”æ¡ˆéƒ½æœ‰æ˜ç¢ºçš„è·è²¬ï¼Œä¾¿æ–¼ç¶­è­·å’Œæ“´å±•ã€‚